syntax = "proto3";

package movie.v1;

import "google/protobuf/timestamp.proto";

service MovieService {
  rpc ListMovies (ListMoviesRequest) returns (ListMoviesResponse);
  rpc GetMovie (GetMovieRequest) returns (GetMovieResponse);
  rpc GetMoviesByIds (GetMoviesByIdsRequest) returns (GetMoviesByIdsResponse);
}

message ListMoviesRequest {
  string category = 1;
  bool random = 2;
  int32 limit = 3;
}

message ListMoviesResponse {
  repeated Movie movies = 1;
}

message GetMovieRequest {
  oneof key {
    string id = 1;
    string slug = 2;
  }
}

message GetMovieResponse {
  MovieDetails movie = 1;
}

message GetMoviesByIdsRequest {
  repeated string ids = 1;
}

message GetMoviesByIdsResponse {
  repeated MovieDetails movies = 1;
}

message Movie {
  string id = 1;
  string title = 2;
  string slug = 3;
  string poster = 4;
  string banner = 5;
  string rating_age = 6;
  string trailer = 7;
  google.protobuf.Timestamp release_date = 8;
}

message MovieDetails {
  string id = 1;
  string title = 2;
  string slug = 3;
  string description = 4;
  string poster = 5;
  string banner = 6;
  string trailer = 7;
  int32 duration = 8;
  string rating_age = 9;
  string country = 10;
  google.protobuf.Timestamp release_date = 11;
}
