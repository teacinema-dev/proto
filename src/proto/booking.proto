syntax = "proto3";

package booking.v1;

service BookingService {
  rpc CreateReservation (CreateReservationRequest) returns (CreateReservationResponse);
  rpc ConfirmBooking (ConfirmBookingRequest) returns (ConfirmBookingResponse);

  rpc ListReservedSeats (ListReservedSeatsRequest) returns (ListReservedSeatsResponse);
}

message SeatInput {
  string seatId = 1;    
  int32 price = 2;     
}

message CreateReservationRequest {
  string userId = 1;
  string screeningId = 2;
  repeated SeatInput seats = 3;
  int32 holdMinutes = 4; 
}

message CreateReservationResponse {
  string orderId = 1;        
  repeated string ticketIds = 2;
  int64 expiresAt = 3;      
  int32 totalAmount = 4;      
}

message ConfirmBookingRequest {
  string bookingId = 1;
  string userId = 2;
}

message ConfirmBookingResponse {
  bool ok = 1;
}

message ListReservedSeatsRequest {
  string hallId = 1;
  string screeningId = 2;
}

message ListReservedSeatsResponse {
  bool ok = 1;
  repeated string reservedSeatIds = 2;
}
